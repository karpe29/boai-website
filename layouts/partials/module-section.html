{{/* 
  Usage: {{ partial "module-section.html" (dict 
    "title" "Module Name"
    "tabs" (slice 
      (dict "title" "Tab 1" "description" "Description 1" "icon" "M12 4v16m8-8H4" "start" 0 "end" 3)
      (dict "title" "Tab 2" "description" "Description 2" "icon" "M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" "start" 3 "end" 6)
      (dict "title" "Tab 3" "description" "Description 3" "icon" "..." "videoSrc" "/videos/tab3.mp4")
      (dict "title" "Tab 4" "description" "Description 4" "icon" "..." "imageSrc" "/images/tab4.jpg" "duration" 5)
    )
    "videoSrc" "/videos/demoVideo.mp4" (optional - fallback for tabs without videoSrc/imageSrc)
    "moduleId" "unique-id"
    "bgClass" "bg-primary"
    "bgClassAlt" "bg-primary-dark"
  ) }}
  
  Tab options:
  - start/end: For single video mode (uses module-level videoSrc)
  - videoSrc: Tab-specific video (overrides module videoSrc)
  - imageSrc + duration: Tab-specific image with display duration in seconds
*/}}

<section class="py-12 md:py-24 {{ .bgClass }}">
    <div class="container mx-auto px-6">
        <div class="max-w-7xl mx-auto">
            <div class="text-center mb-8">
                <!-- <div class="flex items-center justify-center gap-3 mb-2">
                    <h2 class="text-4xl font-bold text-white">{{ .title }}</h2>
                    {{ if .badge }}
                    <span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-accent/20 text-accent border border-accent/50">
                        {{ .badge }}
                    </span>
                    {{ end }}
                </div>
                {{ if .subtitle }}
                <p class="text-gray-400 text-lg">{{ .subtitle }}</p>
                {{ end }}
                {{ if .tryButton }}
                <div class="mt-6">
                    <a href="{{ .tryButton.url | default "#contact" }}" class="inline-block bg-accent hover:bg-accent-light text-white px-8 py-3 rounded-lg font-semibold text-lg transition-all duration-200 transform hover:scale-105 shadow-lg shadow-accent/50">
                        {{ .tryButton.text | default "Try Now" }}
                    </a>
                </div>
                {{ end }}
            </div> -->
            
            <!-- Box Container: Tabs on Left, Video on Right -->
            <div class="flex flex-col md:flex-row border-2 border-primary-light bg-primary-dark overflow-hidden" style="min-height: 400px;">
                <!-- Left Column - Tabs (divided into parts, same height as video) -->
                <div class="w-full md:w-1/3 flex flex-col {{ .bgClass }}" style="min-height: 400px;">
                    <div role="tablist" class="flex flex-col h-full" data-module="{{ .moduleId }}">
                        {{ range $index, $tab := .tabs }}
                        <button
                            role="tab"
                            aria-selected="{{ if eq $index 0 }}true{{ else }}false{{ end }}"
                            data-tab="{{ $index }}"
                            {{ if $tab.start }}data-start="{{ $tab.start }}"{{ end }}
                            {{ if $tab.end }}data-end="{{ $tab.end }}"{{ end }}
                            {{ if $tab.videoSrc }}data-video-src="{{ $tab.videoSrc }}"{{ end }}
                            {{ if $tab.imageSrc }}data-image-src="{{ $tab.imageSrc }}"{{ end }}
                            {{ if $tab.duration }}data-duration="{{ $tab.duration }}"{{ end }}
                            class="module-tab flex-1 flex items-start gap-4 cursor-pointer p-6 transition-all duration-300 relative border-b border-primary-light last:border-b-0 {{ if eq $index 0 }}text-white bg-primary{{ else }}text-gray-400 hover:text-white bg-primary-dark{{ end }}"
                        >
                            <div class="flex-shrink-0 w-10 h-10 rounded-full flex items-center justify-center {{ if eq $index 0 }}bg-accent/20 text-accent{{ else }}bg-primary text-gray-500{{ end }}">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="{{ $tab.icon }}"></path>
                                </svg>
                            </div>
                            <div class="flex-1 text-left">
                                <h3 class="font-semibold mb-1 {{ if eq $index 0 }}text-white{{ else }}text-gray-300{{ end }}">{{ $tab.title }}</h3>
                                <p class="text-sm text-gray-500 leading-relaxed">{{ $tab.description }}</p>
                            </div>
                            {{ if eq $index 0 }}
                            <div class="absolute bottom-0 left-0 h-[3px] w-full bg-accent"></div>
                            {{ end }}
                        </button>
                        {{ end }}
                    </div>
                </div>

                <!-- Right Column - Video/Image (same height as tabs) -->
                <div class="w-full md:w-2/3 relative {{ .bgClassAlt }}">
                    <div class="relative w-full h-full" style="min-height: 400px;">
                        <!-- Video Element (hidden if image is shown) -->
                        <video
                            data-module="{{ .moduleId }}"
                            class="module-video w-full h-full object-cover"
                            preload="metadata"
                            playsinline
                            {{ if .videoSrc }}data-default-video="{{ .videoSrc }}"{{ end }}
                        >
                            {{ if .videoSrc }}
                            <source src="{{ .videoSrc }}" type="video/mp4">
                            {{ end }}
                            Your browser does not support the video tag.
                        </video>

                        <!-- Image Element (hidden by default, shown when tab has imageSrc) -->
                        <img
                            data-module="{{ .moduleId }}"
                            class="module-image w-full h-full object-cover hidden"
                            alt="Module feature image"
                        />

                        <!-- Gradient Overlay -->
                        <div class="absolute inset-0 bg-gradient-to-t from-emerald-900/60 via-slate-950/50 to-slate-900/40 pointer-events-none"></div>

                        <!-- Progress Bar -->
                        <div class="absolute top-0 left-0 w-full h-[3px] bg-white/20 z-20">
                            <div class="progress-bar h-full bg-accent transition-all duration-75 ease-linear" style="width: 0%"></div>
                        </div>

                        <!-- Play/Pause Button (hidden for images) -->
                        <button
                            class="play-pause-btn absolute bottom-5 right-5 h-14 w-14 rounded-full bg-white/90 hover:bg-white flex items-center justify-center shadow-lg transition-all hover:scale-110 z-30"
                            aria-label="Play feature demo"
                        >
                            <svg class="play-icon w-6 h-6 text-gray-900 ml-1" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path>
                            </svg>
                            <svg class="pause-icon w-6 h-6 text-gray-900 hidden" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
